{
  "rules": {
    ".read": "now < 1722470400000",
    ".write": "auth !== null && auth.provider === 'anonymous'",

    "measurements": {
      ".write": "auth !== null && auth.provider === 'anonymous'",
      ".indexOn": ["timestamp", "pigeon"],
      "$measurementKey": {
      	".validate": "newData.hasChildren(['timestamp', 'pigeon', 'lat', 'lon', 'sen0' ])",
        "pigeon": { ".validate": "newData.isNumber() && newData.val().matches(/^[0-9]{1,2}$/)"},
        "lat": { ".validate": "newData.isNumber()"},
        "lon": { ".validate": "newData.isNumber()"},
        "sen0": { ".validate": "newData.isNumber()"}
      }
    }
  }
}
